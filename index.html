<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Consultoría Reforma Laboral 2025</title>
  <style>
    /* Estilos del archivo html claude.html */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .header h1 {
      color: #1a237e;
      font-size: 2.5em;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .header p {
      color: #5e35b1;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      border-color: #667eea;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #1a237e;
      font-weight: 600;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: #f5f5f5;
      color: #333;
    }

    .btn-secondary:hover {
      background: #e0e0e0;
    }

    .section-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .section-btn {
      background: white;
      border: 2px solid #667eea;
      color: #1a237e;
      padding: 20px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-weight: 600;
      font-size: 16px;
    }

    .section-btn:hover {
      background: #667eea;
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .question-container {
      margin-bottom: 30px;
    }

    .question-title {
      font-size: 1.3em;
      color: #1a237e;
      margin-bottom: 20px;
      font-weight: 600;
      line-height: 1.4;
    }

    .options-container {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .option-btn {
      padding: 12px 25px;
      border: 2px solid #e0e0e0;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .option-btn:hover {
      border-color: #667eea;
      background: #f8f9ff;
    }

    .option-btn.selected {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .recommendation {
      background: #f8f9ff;
      border-left: 4px solid #667eea;
      padding: 20px;
      margin-top: 20px;
      border-radius: 8px;
      line-height: 1.6;
    }

    .recommendation h4 {
      color: #1a237e;
      margin-bottom: 10px;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      margin-bottom: 20px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
    }

    .hidden {
      display: none;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #666;
    }

    .success-message {
      background: #e8f5e8;
      color: #2e7d32;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid #4caf50;
    }

    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      .header h1 {
        font-size: 2em;
      }

      .section-buttons {
        grid-template-columns: 1fr;
      }

      .options-container {
        flex-direction: column;
      }

      .navigation {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Reforma Laboral 2025</h1>
    <p>Ley 2466 de 2025 - Consultoría Jurídica Especializada</p>
  </div>

  <div id="initial-screen" class="card">
    <h2 style="color: #1a237e; margin-bottom: 20px; text-align: center;"> ¿Ya sabes cómo afecta a tu empresa la nueva Reforma Laboral (Ley 2466 de 2025)? </h2>
    <p style="text-align: center; margin-bottom: 30px; color: #666; font-size: 1.1em;"> Consulta gratis aquí y descubre los ajustes necesarios para tu empresa </p>
    <form id="user-form">
      <div class="form-group">
        <label for="nombre">Nombre Completo *</label>
        <input type="text" id="nombre" name="nombre" required>
      </div>
      <div class="form-group">
        <label for="telefono">Teléfono *</label>
        <input type="tel" id="telefono" name="telefono" required>
      </div>
      <div class="form-group">
        <label for="email">Correo Electrónico *</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div style="text-align: center;">
        <button type="submit" class="btn">Consultar</button>
      </div>
    </form>
  </div>

  <div id="sections-screen" class="card hidden">
    <h2 style="color: #1a237e; margin-bottom: 20px; text-align: center;"> Selecciona la sección que deseas consultar </h2>
    <p style="text-align: center; margin-bottom: 30px; color: #666;"> Elige el área que mejor se adapte a las necesidades de tu empresa </p>
    <div class="section-buttons">
      <button class="section-btn" onclick="startSection(0)"> <strong>Sección 1</strong><br> Contratación Laboral </button>
      <button class="section-btn" onclick="startSection(1)"> <strong>Sección 2</strong><br> Contrato de Aprendizaje </button>
      <button class="section-btn" onclick="startSection(2)"> <strong>Sección 3</strong><br> Procesos Disciplinarios y RIT </button>
      <button class="section-btn" onclick="startSection(3)"> <strong>Sección 4</strong><br> Jornadas y Recargos </button>
      <button class="section-btn" onclick="startSection(4)"> <strong>Sección 5</strong><br> Inclusión y Diversidad </button>
      <button class="section-btn" onclick="startSection(5)"> <strong>Sección 6</strong><br> Tercerización Laboral </button>
      <button class="section-btn" onclick="startSection(6)"> <strong>Sección 7</strong><br> Nuevas Formas de Prestación del Servicio </button>
    </div>
  </div>

  <div id="questions-screen" class="card hidden">
    <div class="progress-bar">
      <div id="progress-fill" class="progress-fill" style="width: 0%;"></div>
    </div>
    <div class="question-container">
      <h3 id="question-text" class="question-title"></h3>
      <div id="options-container" class="options-container">
        </div>
      <div id="recommendation" class="recommendation hidden">
        <h4>Recomendación:</h4>
        <p id="recommendation-text"></p>
      </div>
    </div>
    <div class="navigation">
      <button id="back-btn" class="btn btn-secondary" onclick="previousQuestion()">Volver</button>
      <button id="next-btn" class="btn" onclick="nextQuestion()">Siguiente</button>
    </div>
  </div>
</div>

<script>
  let currentSectionIndex = 0;
  let currentQuestionIndex = 0;
  let history = []; // Para almacenar el historial de preguntas y respuestas
  let selectedAnswer = null;
  let companyClassification = null; // Para almacenar la clasificación de la empresa en Sección 3

  const initialScreen = document.getElementById('initial-screen');
  const sectionsScreen = document.getElementById('sections-screen');
  const questionsScreen = document.getElementById('questions-screen');
  const userForm = document.getElementById('user-form');
  const questionTextElement = document.getElementById('question-text');
  const optionsContainer = document.getElementById('options-container');
  const recommendationDiv = document.getElementById('recommendation');
  const recommendationTextElement = document.getElementById('recommendation-text');
  const backBtn = document.getElementById('back-btn');
  const nextBtn = document.getElementById('next-btn');
  const progressBarFill = document.getElementById('progress-fill');

  // Datos de las secciones y preguntas extraídos del DOCX
  const sectionsData = [
    // SECCIÓN 1: CONTRATACIÓN LABORAL
    {
      title: "Contratación Laboral",
      questions: [
        {
          text: "¿Todos los contratos laborales en tu empresa están formalizados por escrito y firmados por ambas partes?",
          type: "yes_no",
          recommendations: {
            "Sí": `Con la entrada en vigor de la Ley 2466 de 2025, es necesario actualizar la minuta del contrato laboral para alinearla con los nuevos requerimientos legales. Es fundamental revisar si hubo cambios en la jornada inicialmente pactada, y definir claramente cuál será el día de descanso obligatorio del trabajador.
Además, se deben establecer las obligaciones del empleador y las reglas de conducta que el trabajador debe acatar para contribuir a un entorno laboral libre de discriminación, acoso y violencia. También es recomendable incluir cláusulas que delimiten los requisitos formales de solicitud y justificación de los nuevos permisos laborales, tales como: Asistencia a citas médicas con especialistas, asistir a las obligaciones escolares como acudiente y concurrir a citaciones judiciales, con el fin de evitar su uso abusivo o indebido. Finalmente, se debe considerarse la posibilidad de acordar el pago mensualizado de las cesantías y sus intereses, conforme a lo permitido por la nueva ley.`,
            "No": `Formaliza por escrito todos los contratos laborales sin excepción. La ley presume contrato a término indefinido si no hay documento firmado.
Recomendaciones clave:
Redacta y firma contratos con cada trabajador.
Define tipo de contrato, duración y jornada.
Pacta por escrito el día de descanso obligatorio.
Establece las obligaciones del empleador y las reglas de conducta que el trabajador debe acatar para contribuir a un entorno laboral libre de discriminación, acoso y violencia.
Incluye cláusulas que delimiten los requisitos formales de solicitud y justificación de los nuevos permisos laborales, tales como: asistencia a citas médicas con especialistas, asistir a las obligaciones escolares como acudiente y concurrir a citaciones judiciales, con el fin de evitar su uso abusivo o indebido.
Considera la posibilidad de acordar el pago mensualizado de las cesantías y sus intereses, conforme a lo permitido por la ley.
Entrega copia firmada y guarda soporte.`
          }
        },
        {
          text: "¿Tu empresa tiene actualmente trabajadores contratados a término fijo?",
          type: "yes_no",
          recommendations: {
            "Sí": `Puedes mantener la vinculación a plazo fijo por cuatro (4) años más, hasta 25 de junio de 2029, de esa fecha en adelante inmediatamente se convierte en indefinido.
Verifica que todos los contratos estén por escrito y con indicación clara de la fecha de inicio y fin.
Controla las fechas para evitar prórrogas automáticas no deseadas, en adelante preferiblemente realiza las prórrogas por escrito.
Verifica cuántas prórrogas han tenido los contratos hasta la fecha, evalúa cuáles cargos requieren continuidad y la posibilidad de replantear su modelo a contratos indefinidos lo cual puedes hacer mediante otrosí.
Reevalúa qué cargos requieren realmente una vinculación temporal.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Los contratos a término fijo indican de forma clara la duración exacta del vínculo laboral?",
          type: "yes_no",
          recommendations: {
            "Sí": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`,
            "No": `
Ajusta todos los contratos vigentes para incluir una duración específica y clara.
La ambigüedad da lugar a que el contrato se interprete como a término indefinido.`
          }
        },
        {
          text: "¿Los contratos a término fijo tienen una duración inicial inferior a 12 meses?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Considera realizar todas las prórrogas de manera formal y por escrito.
Recuerda que en adelante desde la cuarta prórroga en adelante la duración no puede ser inferior a 1 año.
Implementa un sistema de control que te alerte sobre la cantidad y duración de las prórrogas firmadas.
Evalúa la viabilidad de contratar directamente a término indefinido cuando no este justificada la duración temporal del contrato.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Contratas empleados por obra o labor determinada?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Verifica que la obra o labor esté claramente definida en el contrato, y que exista un vínculo evidente entre el objeto del contrato y una actividad clara, temporal y delimitada.
Evita el uso del contrato por obra o labor para tareas permanentes o estructurales del negocio. Esto puede considerarse fraude laboral y conlleva la conversión del contrato a término indefinido.
Fortalece tus procesos de control y seguimiento del objeto contratado, ya que ahora se exige mayor carga administrativa para justificar este tipo de vinculación.
Revisa si el personal que actualmente tienes contratado bajo esta modalidad debe ser migrado a contratos a término indefinido, especialmente si desempeñan funciones misionales o de duración permanente.
Revisa y documenta claramente la finalización de las actividades pactadas. Es fundamental dejar trazabilidad sobre el cierre de la obra o labor.
Si requieres que el trabajador continúe con nuevas labores asociadas a otra obra o necesidad puntual, suscribe por escrito un nuevo contrato o amplía el anterior mediante otrosí especificando el nuevo objeto y duración.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        }
      ]
    },
    // SECCIÓN 2: CONTRATO DE APRENDIZAJE
    {
      title: "Contrato de Aprendizaje",
      questions: [
        {
          text: "¿Tu empresa tiene más de 15 trabajadores?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Verifica que estás cumpliendo con la cuota mínima obligatoria conforme al número de trabajadores.
Evalúa si te resulta más conveniente monetizar la cuota o vincular directamente al aprendiz, teniendo en cuenta el impacto económico y operativo.
Asegúrate de formalizar correctamente el contrato de aprendizaje bajo los nuevos parámetros, según el cual ahora se considera como Contrato a término fijo especial.
Mantén registros actualizados y certificados del tiempo en práctica, ya que ahora se reconoce como experiencia laboral.
Evalúa la viabilidad de implementar la modalidad de formación dual, que integra teoría y práctica de manera simultánea con acompañamiento conjunto entre la empresa y el Sena.
Esta modalidad te ayuda a formar nuevos talentos alineado a las necesidades reales del negocio, ya que la empresa participa activamente en el diseño del plan formativo del aprendiz.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Tu empresa tiene o planea contratar trabajadores extranjeros?",
          type: "yes_no",
          recommendations: {
            "Sí": `Debes tener en cuenta los cambios introducidos por la reforma laboral respecto a trabajadores migrantes:
Recomendaciones clave:
- Garantiza igualdad de derechos laborales y de seguridad social a las personas extranjeras, sin importar su estatus migratorio.
- Ya no necesitas una visa de trabajo previa, por lo cual una vez se haya suscrito el contrato de trabajo, ponte en contacto con Migración Colombia quien debe facilitar el proceso de regularización migratoria.
- Mantente atento a la reglamentación que expedirá el Ministerio de Relaciones Exteriores sobre el proceso de regularización.
- Cumple con las obligaciones de reporte vigentes:
  - Notificar a Migración Colombia el inicio, terminación o cualquier novedad del contrato laboral con extranjeros, a través de la plataforma SIRE.
  - Reportar ante el Ministerio del Trabajo el inicio y terminación del contrato a través del RUTEC.
- Evalúa la posibilidad de aplicar el teletrabajo transnacional, si la naturaleza del cargo permite desarrollar el trabajo a distancia.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        }
      ]
    },
    // SECCIÓN 3: PROCESOS DISCIPLINARIOS Y RIT
    {
      title: "Procesos Disciplinarios y RIT",
      questions: [
        {
          text: "¿A qué sector pertenece tu empresa?",
          type: "multiple_choice",
          options: [
            { text: "Sector manufacturero, agropecuario o industrial", value: "industrial" },
            { text: "Sector servicios", value: "servicios" },
            { text: "Sector de comercio", value: "comercio" }
          ]
        },
        {
          text: "¿Cuál es el nivel anual de ingresos ordinarios de tu empresa?",
          type: "conditional_income", // This question type will trigger custom logic
          recommendations: {
            "Microempresa_Menos10": `Las micro y pequeñas empresas con menos de diez (10) trabajadores no están obligadas a tener un Reglamento Interno de Trabajo (RIT), salvo que pertenezcan al sector comercio o superen ese número de trabajadores.
Tampoco deben implementar un procedimiento disciplinario formal, pero sí deben garantizar un proceso básico de debido proceso antes de imponer sanciones, lo cual implica ofrecer al trabajador la oportunidad de ser escuchado, documentar los hechos y la decisión adoptada, actuar con proporcionalidad y evitar decisiones arbitrarias.
Se recomienda tener una guía interna sencilla que oriente la actuación frente a faltas, capacitar al personal encargado sobre cómo manejar estas situaciones, y siempre dejar evidencia escrita de las actuaciones, lo cual brinda respaldo jurídico y evita conflictos futuros.`,
            "Microempresa_Mas10": `Tu empresa está obligada a contar con un Reglamento Interno de Trabajo (RIT).
Donde obligatoriamente debes implementar un procedimiento formal para la imposición de sanciones disciplinarias, lo que incluye definir etapas claras de notificación, descargos, análisis y decisión.
Este proceso debe estar contenido en el RIT y alinearse con el principio de debido proceso, garantizando al trabajador el derecho a ser escuchado y a controvertir las acusaciones.
Se recomienda revisar o actualizar el RIT conforme a la reforma laboral vigente en un plazo no mayor a 12 meses, capacitar a los líderes sobre su aplicación, y asegurar la trazabilidad en cada actuación disciplinaria.
Reglamenta el uso de las TIC´S para llevar a cabo los procesos disciplinarios en tu empresa.`,
            "Pequeña_Menos10": `Las micro y pequeñas empresas con menos de diez (10) trabajadores no están obligadas a tener un Reglamento Interno de Trabajo (RIT), salvo que pertenezcan al sector comercio o superen ese número de trabajadores.
Tampoco deben implementar un procedimiento disciplinario formal, pero sí deben garantizar un proceso básico de debido proceso antes de imponer sanciones, lo cual implica ofrecer al trabajador la oportunidad de ser escuchado, documentar los hechos y la decisión adoptada, actuar con proporcionalidad y evitar decisiones arbitrarias.
Se recomienda tener una guía interna sencilla que oriente la actuación frente a faltas, capacitar al personal encargado sobre cómo manejar estas situaciones, y siempre dejar evidencia escrita de las actuaciones, lo cual brinda respaldo jurídico y evita conflictos futuros.`,
            "Pequeña_Mas10": `Tu empresa está obligada a contar con un Reglamento Interno de Trabajo (RIT).
Donde obligatoriamente debes implementar un procedimiento formal para la imposición de sanciones disciplinarias, lo que incluye definir etapas claras de notificación, descargos, análisis y decisión.
Este proceso debe estar contenido en el RIT y alinearse con el principio de debido proceso, garantizando al trabajador el derecho a ser escuchado y a controvertir las acusaciones.
Se recomienda revisar o actualizar el RIT conforme a la reforma laboral vigente en un plazo no mayor a 12 meses, capacitar a los líderes sobre su aplicación, y asegurar la trazabilidad en cada actuación disciplinaria.
Reglamenta el uso de las TIC´S para llevar a cabo los procesos disciplinarios en tu empresa.`,
            "Mediana": `Tu empresa está obligada a contar con un Reglamento Interno de Trabajo (RIT).
Donde obligatoriamente debes implementar un procedimiento formal para la imposición de sanciones disciplinarias, lo que incluye definir etapas claras de notificación, descargos, análisis y decisión.
Este proceso debe estar contenido en el RIT y alinearse con el principio de debido proceso, garantizando al trabajador el derecho a ser escuchado y a controvertir las acusaciones.
Se recomienda revisar o actualizar el RIT conforme a la reforma laboral vigente en un plazo no mayor a 12 meses, capacitar a los líderes sobre su aplicación, y asegurar la trazabilidad en cada actuación disciplinaria.
Reglamenta el uso de las TIC´S para llevar a cabo los procesos disciplinarios en tu empresa.`,
            "Gran": `Tu empresa está obligada a contar con un Reglamento Interno de Trabajo (RIT).
Donde obligatoriamente debes implementar un procedimiento formal para la imposición de sanciones disciplinarias, lo que incluye definir etapas claras de notificación, descargos, análisis y decisión.
Este proceso debe estar contenido en el RIT y alinearse con el principio de debido proceso, garantizando al trabajador el derecho a ser escuchado y a controvertir las acusaciones.
Se recomienda revisar o actualizar el RIT conforme a la reforma laboral vigente en un plazo no mayor a 12 meses, capacitar a los líderes sobre su aplicación, y asegurar la trazabilidad en cada actuación disciplinaria.
Reglamenta el uso de las TIC´S para llevar a cabo los procesos disciplinarios en tu empresa.`
          }
        },
        {
          text: "¿Tienes menos de 10 trabajadores?", // This question will only be shown conditionally
          type: "yes_no_conditional",
          recommendations: {
            "Sí": `Las micro y pequeñas empresas con menos de diez (10) trabajadores no están obligadas a tener un Reglamento Interno de Trabajo (RIT), salvo que pertenezcan al sector comercio o superen ese número de trabajadores.
Tampoco deben implementar un procedimiento disciplinario formal, pero sí deben garantizar un proceso básico de debido proceso antes de imponer sanciones, lo cual implica ofrecer al trabajador la oportunidad de ser escuchado, documentar los hechos y la decisión adoptada, actuar con proporcionalidad y evitar decisiones arbitrarias.
Se recomienda tener una guía interna sencilla que oriente la actuación frente a faltas, capacitar al personal encargado sobre cómo manejar estas situaciones, y siempre dejar evidencia escrita de las actuaciones, lo cual brinda respaldo jurídico y evita conflictos futuros.`,
            "No": `Tu empresa está obligada a contar con un Reglamento Interno de Trabajo (RIT).
Donde obligatoriamente debes implementar un procedimiento formal para la imposición de sanciones disciplinarias, lo que incluye definir etapas claras de notificación, descargos, análisis y decisión.
Este proceso debe estar contenido en el RIT y alinearse con el principio de debido proceso, garantizando al trabajador el derecho a ser escuchado y a controvertir las acusaciones.
Se recomienda revisar o actualizar el RIT conforme a la reforma laboral vigente en un plazo no mayor a 12 meses, capacitar a los líderes sobre su aplicación, y asegurar la trazabilidad en cada actuación disciplinaria.
Reglamenta el uso de las TIC´S para llevar a cabo los procesos disciplinarios en tu empresa.`
          }
        },
        {
          text: "¿Tu empresa cuenta con un Reglamento Interno de Trabajo vigente y conocido por los trabajadores?",
          type: "yes_no",
          recommendations: {
            "Sí": `Asegúrate de actualizar el RIT conforme a las nuevas exigencias de la reforma laboral, en especial lo relacionado con el respeto a la dignidad humana, la no discriminación, los nuevos permisos remunerados, el día de descanso obligatorio, los requisitos para flexibilizar la jornada laboral a los trabajadores con responsabilidades del cuidado, las nuevas formas de trabajo a distancia. Publica el RIT en medios digitales accesibles que sean del control de la empresa. Asegúrate de diseñar un RIT adecuado para entornos digitales con el fin de facilitar su comprensión.`,
            "No": `Si tienes más de 10 empleados el RIT es obligatorio. Inicia el diseño del reglamento a la mayor brevedad posible. Publica el RIT en medios digitales accesibles que sean del control de la empresa. Asegúrate de diseñar un RIT adecuado para entornos digitales con el fin de facilitar su comprensión.`
          }
        },
        {
          text: "¿La empresa tiene políticas definidas para prevenir y sancionar el acoso y la violencia en el trabajo?",
          type: "yes_no",
          recommendations: {
            "Sí": `Actualiza tus políticas para incorporar la ampliación del concepto de acoso y violencia en el trabajo de acuerdo con los parámetros nuevos que trae la reforma laboral.`,
            "No": `Es obligatorio para todas las empresas contar con mecanismos de prevención del acoso laboral y acoso sexual en el trabajo. Implementa un comité de convivencia actualizado conforme a la Ley 1010 y la nueva reforma laboral. Integra perspectiva de género y canales confidenciales.`
          }
        }
      ]
    },
    // SECCIÓN 4: JORNADAS Y RECARGOS
    {
      title: "Jornadas y Recargos",
      questions: [
        {
          text: "¿Tienes trabajadores que laboran después de las 7:00 p.m.?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Verifica que estás pagando correctamente los recargos nocturnos, que ahora inician a las 7:00 p.m.
Si tienes personal en turnos nocturnos permanentes, asegúrate de que el tiempo de descanso compensatorio esté claramente establecido y se cumpla.
Evalúa la viabilidad de reorganizar los turnos para optimizar los costos de recargos nocturnos, si es posible sin afectar la operación.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Tienes trabajadores que laboran domingos o festivos?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Asegúrate de pagar el recargo del 100% por trabajo dominical o festivo, según lo establece la nueva ley.
Implementa un sistema de control para registrar y calcular con precisión las horas trabajadas en domingos y festivos.
Informa claramente a los trabajadores sobre el cambio en el recargo dominical y festivo.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Tu empresa requiere flexibilidad horaria para algunos trabajadores, como madres o padres cabeza de familia?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Diseña políticas claras para flexibilizar la jornada laboral de trabajadores con responsabilidades del cuidado.
Establece horarios flexibles, trabajo a distancia, o jornadas reducidas, que permitan conciliar la vida laboral y familiar.
Asegúrate de que estas medidas sean voluntarias y no afecten los derechos laborales.
Comunica las opciones de flexibilidad a tus empleados y capacita a los líderes para gestionarlas.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Estás aplicando el régimen de jornada flexible de 42 horas semanales?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Continúa aplicando la reducción gradual de la jornada laboral.
Asegúrate de que el promedio de horas semanales no supere las 42 horas en un período de hasta tres (3) semanas.
Mantén una comunicación clara con tus trabajadores sobre el cronograma de reducción y los ajustes en sus jornadas.`,
            "No": `
Evalúa la viabilidad de implementar la jornada flexible de 42 horas semanales en tu empresa.
Define un cronograma claro para la reducción gradual de la jornada.
Comunica los beneficios y las implicaciones de esta medida a tus trabajadores.`
          }
        }
      ]
    },
    // SECCIÓN 5: INCLUSIÓN Y DIVERSIDAD
    {
      title: "Inclusión y Diversidad",
      questions: [
        {
          text: "¿Tienes mujeres embarazadas o en período de lactancia trabajando en tu empresa?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Garantiza el fuero de maternidad desde el momento de la concepción y durante el embarazo y la lactancia.
No puedes despedir a una mujer embarazada o en lactancia sin autorización del Ministerio del Trabajo, salvo en casos de justa causa probada.
Asegúrate de brindar todas las garantías y facilidades para el período de lactancia.
Capacita a tus líderes y personal de RRHH sobre el alcance del fuero de maternidad y las prohibiciones de despido.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Tu empresa cuenta con personas en situación de discapacidad?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Asegúrate de que estás cumpliendo con la cuota de vinculación obligatoria si tienes más de 20 trabajadores.
Garantiza la inclusión laboral de personas con discapacidad, brindando ajustes razonables en el puesto de trabajo.
Elimina cualquier barrera física, tecnológica o actitudinal que impida su plena participación.
Promueve un ambiente de trabajo inclusivo y de respeto.`,
            "No": `
Considera la posibilidad de incorporar personas en situación de discapacidad en tu equipo de trabajo.
Infórmate sobre los beneficios y exenciones fiscales por la vinculación de personas con discapacidad.
Capacita a tu personal para promover un ambiente inclusivo.`
          }
        },
        {
          text: "¿Tu empresa tiene trabajadores sindicalizados o existe un sindicato en la empresa?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Respeta el derecho de asociación sindical y de negociación colectiva.
Garantiza la protección del fuero sindical de los trabajadores.
Mantén un diálogo abierto y constructivo con las organizaciones sindicales.`,
            "No": `
Respeta el derecho de asociación sindical de tus trabajadores, incluso si no tienen sindicato.
Evita cualquier práctica antisindical.
Promueve un ambiente de respeto y diálogo con tus trabajadores.`
          }
        },
        {
          text: "¿Tu empresa tiene una política de equidad de género o busca promover la igualdad en el trabajo?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Actualiza tu política de equidad de género para incluir los nuevos principios de igualdad salarial y no discriminación.
Revisa y ajusta los procesos de selección, promoción y remuneración para asegurar la igualdad de oportunidades.
Implementa acciones afirmativas para corregir desigualdades históricas.
Capacita a tus líderes y empleados sobre la importancia de la equidad de género.`,
            "No": `
Considera implementar una política de equidad de género en tu empresa.
La nueva ley promueve la igualdad salarial y la no discriminación.
La equidad de género mejora el ambiente laboral y la productividad.`
          }
        }
      ]
    },
    // SECCIÓN 6: TERCERIZACIÓN LABORAL
    {
      title: "Tercerización Laboral",
      questions: [
        {
          text: "¿Tu empresa contrata servicios con empresas de tercerización o intermediación laboral?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Revisa cuidadosamente tus contratos con empresas de tercerización para asegurar que cumplen con la nueva normativa.
Asegúrate de que no se esté incurriendo en intermediación laboral ilegal, especialmente si el personal tercerizado realiza funciones misionales permanentes.
Verifica que las empresas contratistas cumplan con todas sus obligaciones laborales y de seguridad social.
Fortalece tus procesos de auditoría y seguimiento a los proveedores de servicios tercerizados.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Utilizas contratos de prestación de servicios para labores que son misionales y permanentes de tu negocio?",
          type: "yes_no",
          recommendations: {
            "Sí": `Reevalúa el uso de contratos de prestación de servicios para actividades misionales y permanentes.
La nueva ley restringe el uso de este tipo de contratos para evitar la simulación de relaciones laborales.
Considera migrar a contratos laborales directos a término indefinido para este tipo de funciones.
Asesórate legalmente para evitar posibles demandas por existencia de relación laboral.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        }
      ]
    },
    // SECCIÓN 7: Nuevas Formas de Prestación del Servicio
    {
      title: "Nuevas Formas de Prestación del Servicio",
      questions: [
        {
          text: "¿Tienes trabajadores en modalidad de teletrabajo o estás considerando implementarlo?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Formaliza el teletrabajo mediante contrato escrito: Incluye condiciones específicas como la modalidad, lugar de ejecución, disponibilidad, medios tecnológicos, y controles sobre el cumplimiento.
-Incluye cláusula de reversibilidad: El contrato debe establecer que el teletrabajo no es obligatorio para el trabajador, y que puede regresar a la modalidad presencial bajo ciertas condiciones acordadas.
-Diseña o actualiza la política de teletrabajo: Debe contemplar la seguridad digital, manejo de la información, disponibilidad del trabajador, desconexión laboral, y cumplimiento del SG-SST.
-Paga el auxilio de conectividad digital:
Es obligatorio si el salario del teletrabajador es igual o inferior a 2 SMMLV. Este auxilio reemplaza el auxilio de transporte en la modalidad remota o de teletrabajo.
-Evalúa el teletrabajo transnacional: Puedes implementarlo si las funciones se pueden desempeñar desde el exterior.
-Asegura la protección de la salud en el entorno remoto: Incluye al teletrabajador en la evaluación de riesgos del SG-SST y entrega recomendaciones sobre ergonomía, pausas activas y riesgos psicosociales.
-Implementa canales de reporte y control claros: Utiliza medios tecnológicos para documentar la jornada laboral, cumplimiento de funciones, y entrega de resultados.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        },
        {
          text: "¿Estás utilizando o planeas utilizar plataformas digitales para la contratación de servicios (ej. apps de delivery, transporte)?",
          type: "yes_no",
          recommendations: {
            "Sí": `
Revisa la nueva regulación sobre trabajadores de plataformas digitales, que establece una presunción de laboralidad.
Asegúrate de que la relación contractual con los trabajadores de plataformas cumpla con las nuevas exigencias laborales y de seguridad social.
Considera la posibilidad de establecer contratos laborales directos si las características de la relación indican subordinación.
Prepárate para posibles litigios o demandas si no se ajustan a la nueva normativa.`,
            "No": `En tu caso no se requieren ajustes adicionales derivados de la nueva norma.`
          }
        }
      ]
    }
  ];

  userForm.addEventListener('submit', function(e) {
    e.preventDefault();
    initialScreen.classList.add('hidden');
    sectionsScreen.classList.remove('hidden');
  });

  function startSection(sectionIndex) {
    currentSectionIndex = sectionIndex;
    currentQuestionIndex = 0;
    history = []; // Limpiar historial al iniciar una nueva sección
    sectionsScreen.classList.add('hidden');
    questionsScreen.classList.remove('hidden');
    renderQuestion();
  }

  function renderQuestion() {
    recommendationDiv.classList.add('hidden'); // Ocultar recomendación al cambiar de pregunta
    recommendationTextElement.innerHTML = ''; // Limpiar el texto de la recomendación
    optionsContainer.innerHTML = ''; // Limpiar opciones anteriores
    selectedAnswer = null; // Resetear la respuesta seleccionada

    const section = sectionsData[currentSectionIndex];
    const question = section.questions[currentQuestionIndex];

    questionTextElement.textContent = question.text;

    if (question.type === "yes_no" || question.type === "yes_no_conditional") {
      // Para preguntas de Sí/No
      const yesBtn = document.createElement('button');
      yesBtn.classList.add('option-btn');
      yesBtn.textContent = 'Sí';
      yesBtn.onclick = () => selectAnswer('Sí');
      optionsContainer.appendChild(yesBtn);

      const noBtn = document.createElement('button');
      noBtn.classList.add('option-btn');
      noBtn.textContent = 'No';
      noBtn.onclick = () => selectAnswer('No');
      optionsContainer.appendChild(noBtn);
    } else if (question.type === "multiple_choice") {
      // Para preguntas de opción múltiple (como la primera de Sección 3)
      question.options.forEach(option => {
        const optionBtn = document.createElement('button');
        optionBtn.classList.add('option-btn');
        optionBtn.textContent = option.text;
        optionBtn.onclick = () => selectAnswer(option.value);
        optionsContainer.appendChild(optionBtn);
      });
    } else if (question.type === "conditional_income") {
      // Lógica específica para la pregunta de ingresos en Sección 3
      let incomeOptions = [];
      if (history[history.length - 1].answer === "industrial") {
        incomeOptions = [
          { text: "Menor o igual a $1.173 millones (Microempresa)", value: "Microempresa" },
          { text: "Mayor a $1.173 millones y hasta $10.212 millones (Pequeña empresa)", value: "Pequeña empresa" },
          { text: "Mayor a $10.212 millones y hasta $86.517 millones (Mediana empresa)", value: "Mediana empresa" },
          { text: "Mayor a $86.517 millones (Gran empresa)", value: "Gran empresa" }
        ];
      } else if (history[history.length - 1].answer === "servicios") {
        incomeOptions = [
          { text: "Menor o igual a $1.642 millones (Microempresa)", value: "Microempresa" },
          { text: "Entre $1.642 y $6.575 millones (Pequeña empresa)", value: "Pequeña empresa" },
          { text: "Entre $6.575 y $24.060 millones (Mediana empresa)", value: "Mediana empresa" },
          { text: "Mayor a $24.060 millones (Gran empresa)", value: "Gran empresa" }
        ];
      } else if (history[history.length - 1].answer === "comercio") {
        incomeOptions = [
          { text: "Menor o igual a $2.229 millones (Microempresa)", value: "Microempresa" },
          { text: "Entre $2.229 y $21.480 millones (Pequeña empresa)", value: "Pequeña empresa" },
          { text: "Entre $21.480 y $107.566 millones (Mediana empresa)", value: "Mediana empresa" },
          { text: "Mayor a $107.566 millones (Gran empresa)", value: "Gran empresa" }
        ];
      }

      incomeOptions.forEach(option => {
        const optionBtn = document.createElement('button');
        optionBtn.classList.add('option-btn');
        optionBtn.textContent = option.text;
        optionBtn.onclick = () => selectAnswer(option.value);
        optionsContainer.appendChild(optionBtn);
      });
    }

    updateProgressBar();
    updateNavigationButtons();
  }

  function selectAnswer(answer) {
    selectedAnswer = answer;
    // Resaltar la opción seleccionada
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.classList.remove('selected');
      if (btn.textContent.includes(answer) || btn.value === answer) { // Improved selection
        btn.classList.add('selected');
      }
    });

    showRecommendation();
  }

  function showRecommendation() {
    const section = sectionsData[currentSectionIndex];
    const question = section.questions[currentQuestionIndex];
    let recommendation = '';

    if (question.type === "yes_no" || question.type === "yes_no_conditional") {
      recommendation = question.recommendations[selectedAnswer];
    } else if (question.type === "multiple_choice") {
      // For multiple choice, recommendation is handled dynamically or in the next step
      // For now, no direct recommendation on selection for this type
      recommendation = 'Selecciona una opción para continuar.';
    } else if (question.type === "conditional_income") {
      // When an income option is selected, store the classification
      companyClassification = selectedAnswer;
      // Do not show recommendation directly for income selection, it leads to the next question
      recommendationDiv.classList.add('hidden');
      return; // Exit to allow nextQuestion to proceed
    }

    recommendationTextElement.innerHTML = recommendation;
    recommendationDiv.classList.remove('hidden');
  }

  function nextQuestion() {
    if (selectedAnswer === null && (sectionsData[currentSectionIndex].questions[currentQuestionIndex].type === "yes_no" || sectionsData[currentSectionIndex].questions[currentQuestionIndex].type === "yes_no_conditional" || sectionsData[currentSectionIndex].questions[currentQuestionIndex].type === "multiple_choice")) {
      alert('Por favor selecciona una respuesta antes de continuar.');
      return;
    }

    history.push({
      section: currentSectionIndex,
      question: currentQuestionIndex,
      answer: selectedAnswer,
      recommendation: recommendationTextElement.innerHTML // Guardar la recomendación mostrada
    });

    const section = sectionsData[currentSectionIndex];

    // Lógica para Sección 3
    if (currentSectionIndex === 2) { // Sección 3: Procesos Disciplinarios y RIT
      if (currentQuestionIndex === 0) { // Pregunta de sector
        currentQuestionIndex++; // Ir a la pregunta de ingresos
      } else if (currentQuestionIndex === 1) { // Pregunta de ingresos
        // Determine if the next question (about 10 workers) should be shown
        if (companyClassification === "Microempresa" || companyClassification === "Pequeña empresa") {
          currentQuestionIndex = 2; // Move to the "less than 10 workers" question
        } else {
          // If Mediana or Gran empresa, skip the "less than 10 workers" question
          // and directly show the recommendation for Mediana/Gran based on companyClassification
          recommendationTextElement.innerHTML = section.questions[1].recommendations[companyClassification];
          recommendationDiv.classList.remove('hidden');
          currentQuestionIndex = 3; // Skip to the next relevant question for Mediana/Gran
        }
      } else if (currentQuestionIndex === 2 && (history[history.length - 2].answer === "Microempresa" || history[history.length - 2].answer === "Pequeña empresa")) {
        // This is the "less than 10 workers" question
        // The recommendation is already shown, proceed to the next regular question
        currentQuestionIndex++;
      } else {
        currentQuestionIndex++;
      }
    } else {
      currentQuestionIndex++;
    }

    if (currentQuestionIndex < section.questions.length) {
      // Skip the conditional "less than 10 workers" question if not applicable for Section 3
      if (currentSectionIndex === 2 && currentQuestionIndex === 2 && (companyClassification !== "Microempresa" && companyClassification !== "Pequeña empresa")) {
        currentQuestionIndex++; // Skip this question
      }
      renderQuestion();
    } else {
      alert('¡Has completado esta sección!');
      goToSections();
    }
  }

  function previousQuestion() {
    if (history.length > 0) {
      const prev = history.pop();
      currentSectionIndex = prev.section;
      currentQuestionIndex = prev.question;
      selectedAnswer = prev.answer; // Restaurar la respuesta anterior
      renderQuestion(); // Renderizar la pregunta anterior
      // If there was a recommendation previously, show it again
      if (prev.recommendation) {
        recommendationTextElement.innerHTML = prev.recommendation;
        recommendationDiv.classList.remove('hidden');
      }
    } else {
      // Si no hay historial, volver a la pantalla de secciones
      goToSections();
    }
  }

  function goToSections() {
    questionsScreen.classList.add('hidden');
    sectionsScreen.classList.remove('hidden');
    companyClassification = null; // Reset for Section 3
  }

  function updateProgressBar() {
    const section = sectionsData[currentSectionIndex];
    let totalQuestionsInCurrentFlow = section.questions.length;

    // Adjust total questions for Section 3 conditional flow
    if (currentSectionIndex === 2) {
      // If it's the income question and it leads to Mediana/Gran, then the "less than 10" question is skipped
      if (currentQuestionIndex === 1 && (companyClassification !== "Microempresa" && companyClassification !== "Pequeña empresa")) {
        totalQuestionsInCurrentFlow = section.questions.length - 1; // Subtract the skipped question
      }
    }

    const progress = (currentQuestionIndex / totalQuestionsInCurrentFlow) * 100;
    progressBarFill.style.width = `${progress}%`;
  }

  function updateNavigationButtons() {
    backBtn.style.display = (history.length > 0) ? 'inline-block' : 'none';
  }
</script>
</body>
</html>